(this.webpackJsonpreact_app=this.webpackJsonpreact_app||[]).push([[0],{101:function(e,t,n){e.exports=n.p+"static/media/oslometsvart.3b9b0cc3.png"},102:function(e,t,n){e.exports=n.p+"static/media/oslomethvit.2c306d99.png"},104:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),l=n.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(44),u=n(18),c=n(11),s=n(46),d=n(21),m=n(22),p=n(26),f=n(25),g=n(6),E=(n(81),n(63)),h=n.n(E),v=n(33),b=function(e,t){return Object(v.a)(Object(v.a)({},e),t)},y=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e},_=y("http://localhost:8080/api/","https://orakelqueueservice.herokuapp.com/api/"),k=h.a.create({baseURL:_}),S=function(e){return{type:"AUTH_SUCCESS",token:e.token,userId:e.userId,userRoles:e.roles}},T=function(){return localStorage.removeItem("user"),{type:"AUTH_LOGOUT"}},O=function(){return function(e){var t=JSON.parse(localStorage.getItem("user"));t&&t.token?k.post("auth/isTokenValid",t.token).then((function(n){!0===n.data?e(S(t)):e(T())})):e(T())}},C=function(e){return{type:"TOGGLE_LOGIN_MODAL",visible:e}};function U(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}var D=function(){return function(e){e({type:"FETCH_QUEUE_START"}),k.get("queue/").then((function(t){e({type:"FETCH_QUEUE_SUCCESS",queueData:t.data})})).catch((function(t){e(function(e){return{type:"FETCH_QUEUE_FAIL",error:e}}(t.response))}))}},j=n(109),A=n(20),L=n(64),I=n.n(L),N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return I()({title:e,text:t,content:n,icon:"info",button:{text:"Ok",className:"btn btn-primary"}})},H=Object(c.b)((function(e){return{isAuthenticated:null!==e.auth.token}}),(function(e){return{showLoginModal:function(){return e(C(!1))},logoutHandler:function(){return e(T())}}}))((function(e){var t=e.isAuthenticated?{color:"black"}:{color:"white"},a=e.isAuthenticated?{background:"none",border:"none",color:"black",width:"100px",height:"40px"}:{background:"none",border:"none",color:"white",width:"100px",height:"40px"},o=r.a.createElement(A.a.Link,null,r.a.createElement("button",{style:a,onClick:e.showLoginModal},r.a.createElement("strong",null,"Admin"))),l=r.a.createElement(A.a.Link,null,r.a.createElement("button",{style:a,onClick:e.logoutHandler},r.a.createElement("strong",null,"Logg Ut"))),i=e.isAuthenticated?l:o,u=e.isAuthenticated?{bg:"warning"}:{bg:"primary"};return r.a.createElement(j.a,u,r.a.createElement(A.a,{className:"container-fluid"},r.a.createElement(j.a.Brand,null,r.a.createElement("img",{alt:"",src:n(e.isAuthenticated?101:102),width:"140",height:"90",className:"d-inline-block align-top"})),r.a.createElement(A.a.Item,null,r.a.createElement("h2",{style:t},r.a.createElement("strong",null,"Orakel"))),r.a.createElement(A.a.Link,{className:"ml-5",style:t,onClick:function(){var e=document.createElement("div");e.innerHTML="<strong><a href='https://discord.gg/jgzqYpX' target='_blank'>Orakels Discord</a></strong>",N("Discord","For digital veiledning benytter vi oss av Discord, og har v\xe5r egen server til dette. Inne p\xe5 serveren setter vi pris p\xe5 om du leser informasjonen i tekstkanalen kalt informasjon, og vi anbefaler alle \xe5 laste ned klienten deres i stedet for \xe5 bruke tjenesten gjennom nettleseren.",e)}},r.a.createElement("strong",null,"Discord")),r.a.createElement(A.a.Link,{className:"ml-5",style:t,onClick:function(){var e=document.createElement("div");e.innerHTML="<strong><a href='https://github.com/OrakelOsloMet/Orakel_Queue_Client/issues' target='_blank'>GitHub Repo</a></strong>",N("Feilrapportering","Orakels k\xf8system er et fritidsprosjekt som er bygget og vedlikeholdt av en person. Det er derfor en viss fare for bugs og feil. Disse kan rapporteres ved \xe5 legge inn en issue p\xe5 GitHub-repoet, eller ved \xe5 ta kontakt med Fredrik Pedersen. Vi setter ogs\xe5 pris p\xe5 \xf8nsker om tilleggsfunksjonalitet :) ",e)}},r.a.createElement("strong",null,"Feilrapportering")),r.a.createElement(A.a.Link,{className:"ml-5",style:t,onClick:function(){var e=document.createElement("div");e.innerHTML=y("<strong><a href='localhost:8080/api/resources/userguide' target='_blank'>Brukerveiledning</a></strong>","<strong><a href='https://orakelqueueservice.herokuapp.com/api/' target='_blank'>Brukerveiledning</a></strong>"),N("Om Orakels K\xf8system","Coming Soon!",e)}},r.a.createElement("strong",null,"Om")),r.a.createElement(A.a.Item,{className:"ml-auto"},i)))})),F=n(37),w=function(e,t,n){var a=b(n[t],{value:e.target.value,valid:Q(e.target.value,n[t].validation),touched:!0}),r=b(n,Object(F.a)({},t,a)),o=!0;for(var l in r)o=r[l].valid&&o;return{form:r,formIsValid:o}},Q=function(e,t){var n=!0;return!t||(t.required&&(n=""!==e.trim()&&n),t.minLength&&(n=e.length>=t.minLength&&n),t.maxLength&&(n=e.length<=t.maxLength&&n),n)},R=function(e){var t=null;switch(e.inputType){case"input":t=r.a.createElement("input",Object.assign({className:"form-control ml-2 mr-2 mt-2",value:e.value,onChange:e.changed},e.inputConfig));break;case"select":t=r.a.createElement("select",{className:"form-control ml-2 mr-2 mt-2",value:e.value,onChange:e.changed},e.inputConfig.options.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.displayValue)})));break;default:t=r.a.createElement("input",{className:"form-control"})}return r.a.createElement(r.a.Fragment,null,t)},q=function(){return r.a.createElement("div",{className:"spinner-border text-primary"})},M=n(31),V=function(e){return r.a.createElement("button",{disabled:e.disabled,className:e.styling,onClick:e.clicked},e.children)},x=n(71),B=function(e){return r.a.createElement(M.a,Object.assign({},e,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),r.a.createElement(M.a.Header,{closeButton:!0},r.a.createElement(M.a.Title,{id:"contained-modal-title-vcenter"},"Innlogging")),r.a.createElement(M.a.Body,{className:"show-grid"},r.a.createElement(x.a,null,e.form,r.a.createElement("p",{className:"mt-4"},r.a.createElement("strong",null,"Denne innloggingssiden er kun ment for Orakler p\xe5 jobb. Er du student og skal stelle deg i k\xf8 trenger du IKKE \xe5 logge inn her :)")))),r.a.createElement(M.a.Footer,null,r.a.createElement(V,{styling:"btn btn-danger",clicked:e.onHide},"Lukk"),r.a.createElement(V,{btnType:"Success",styling:"btn btn-primary",disabled:!e.formIsValid,clicked:e.loginHandler},"Logg Inn")))},J=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={form:{username:{inputType:"input",inputConfig:{type:"text",placeholder:"Brukernavn"},value:"",label:"Brukernavn",validation:{required:!0,maxLength:30},valid:!1,touched:!1},password:{inputType:"input",inputConfig:{type:"password",placeholder:"Passord"},value:"",label:"Passord",validation:{required:!0,maxLength:150},valid:!1,touched:!1}},formIsValid:!1},e.submitHandler=function(){e.props.onLoginSubmit(e.state.form.username.value,e.state.form.password.value)},e.inputChangedHandler=function(t,n){e.setState(w(t,n,e.state.form))},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=[];for(var n in this.state.form)t.push({id:n,config:this.state.form[n]});var a=this.props.loading?r.a.createElement(q,null):r.a.createElement("form",{className:"form-inline"},t.map((function(t){return r.a.createElement(R,{key:t.id,inputType:t.config.inputType,inputConfig:t.config.inputConfig,value:t.config.value,invalid:!t.config.valid,shouldValidate:t.config.validation,touched:t.config.touched,label:t.config.label,changed:function(n){return e.inputChangedHandler(n,t.id)}})})),this.props.error?r.a.createElement("p",{className:"mt-4",style:{color:"red"}},r.a.createElement("strong",null,this.props.error)):null);return r.a.createElement(B,{form:a,formIsValid:this.state.formIsValid,loginHandler:this.submitHandler,show:this.props.showModal,onHide:this.props.hideLoginModal})}}]),n}(a.Component),G=Object(c.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,showModal:e.auth.showModal}}),(function(e){return{onLoginSubmit:function(t,n){return e(function(e,t){return function(n){n({type:"AUTH_START"}),k.post("auth/signin",{username:e,password:t}).then((function(e){e.data.token&&(localStorage.setItem("user",JSON.stringify(e.data)),n(S(e.data)))})).catch((function(e){n(function(e){return{type:"AUTH_FAIL",error:e}}(e.response.data.message))}))}}(t,n))},hideLoginModal:function(){return e(C(!0))}}}))(J),P=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(H,null),r.a.createElement("main",null,r.a.createElement(G,null),this.props.children))}}]),n}(a.Component),K=Object(c.b)((function(e){return{isAuthenticated:null!=e.auth.token,userRoles:e.auth.userRoles,queueData:e.queue.queueData}}),(function(e){return{deleteQueueEntity:function(t){return e(function(e){return function(t){t({type:"DELETE_FROM_QUEUE_START"}),k.delete("queue/"+e,{headers:U()}).then((function(){t({type:"DELETE_FROM_QUEUE_SUCCESS"}),t(D())})).catch((function(e){t(function(e){return{type:"DELETE_FROM_QUEUE_FAIL",error:e}}(e.response))}))}}(t))},confirmDoneEntity:function(t){return e(function(e){return function(t){t({type:"DONE_IN_QUEUE_START"}),k.post("queue/confirmdone/"+e,null,{headers:U()}).then((function(){t({type:"DONE_IN_QUEUE_SUCCESS"}),t(D())})).catch((function(e){t(function(e){return{type:"DONE_IN_QUEUE_FAIL",error:e}}(e.response))}))}}(t))}}}))((function(e){var t=[],n=r.a.createElement(r.a.Fragment,null,r.a.createElement("th",{key:"queueNumberHeader",scope:"col"},"Plassering"),r.a.createElement("th",{key:"nameHeader",scope:"col"},"Navn"),r.a.createElement("th",{key:"subjectHeader",scope:"col"},"Emne"),r.a.createElement("th",{key:"discordHeader",scope:"col"},"Arena")),a=e.isAuthenticated?r.a.createElement("th",{key:"actionsHeader",scope:"col"},"Handlinger"):null;t.push(n),t.push(a);for(var o=r.a.createElement("thead",{key:"tableHead",className:"thead-dark"},r.a.createElement("tr",null,t)),l=[],i=function(t){var n="row"+t,a=[];a.push(r.a.createElement("td",{key:"entry"+t,id:"entry"+t},t+1)),a.push(r.a.createElement("td",{key:"name"+t,id:"name"+t},e.queueData[t].name)),a.push(r.a.createElement("td",{key:"subject"+t,id:"subject"+t},e.queueData[t].subject)),a.push(r.a.createElement("td",{key:"discord"+t,id:"discord"+t},!1===e.queueData[t].digitalConsultation?"Datatorget":"Discord"));var o=r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-success",onClick:function(){return e.confirmDoneEntity(e.queueData[t].id)}},"Ferdig"),r.a.createElement("button",{className:"btn btn-danger ml-2",onClick:function(){return e.deleteQueueEntity(e.queueData[t].id)}},"Slett"));e.isAuthenticated&&(o=e.userRoles.includes("ROLE_ADMIN")?o:null,a.push(r.a.createElement("td",{key:"actions"+t,id:"action"+t},o))),l.push(r.a.createElement("tr",{key:t,id:n},a))},u=0;u<e.queueData.length;u++)i(u);var c=r.a.createElement("tbody",null,l);return r.a.createElement("table",{className:"table table-striped mb-4"},o,c)})),z=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={form:{name:{inputType:"input",inputConfig:{type:"text",placeholder:"Fornavn"},value:"",label:"Navn",validation:{required:!0,minLength:3,maxLength:30},valid:!1,touched:!1},subject:{inputType:"select",inputConfig:{options:[]},value:"Programmering",label:"Velg Emne",validation:{},valid:!0},year:{inputType:"select",inputConfig:{options:[{value:1,displayValue:"1. \xe5r"},{value:2,displayValue:"2. \xe5r"},{value:3,displayValue:"3. \xe5r"}]},value:1,label:"\xc5rstrinn",validation:{},valid:!0},discord:{inputType:"select",inputConfig:{options:[{value:!1,displayValue:"Fysisk Veiledning (Datatorget)"},{value:!0,displayValue:"Digital Veiledning (Discord)"}]},value:0,label:"Veiledningsform",validation:{},valid:!0}},formIsValid:!1},e.fillSubjectSelector=function(){var t=Object(v.a)({},e.state.form);e.props.subjects.forEach((function(e){t.subject.inputConfig.options.push({value:e,displayValue:e})})),e.setState({form:t})},e.inputChangedHandler=function(t,n){e.setState(w(t,n,e.state.form))},e.registrationHandler=function(t){t.preventDefault();var n={};for(var a in e.state.form)n[a]=e.state.form[a].value;e.postNewQueueEntry(n)},e.postNewQueueEntry=function(t){var n={name:t.name,subject:t.subject,digitalConsultation:t.discord,studyYear:t.year};e.props.addQueueEntity(n)},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.fillSubjectSelector()}),1e3)}},{key:"render",value:function(){var e=this,t=this.props.loading?r.a.createElement(q,null):r.a.createElement(K,null),n=[];for(var a in this.state.form)n.push({id:a,config:this.state.form[a]});var o=r.a.createElement("form",{onSubmit:this.registrationHandler,className:"form-inline mt-3"},n.map((function(t){return r.a.createElement(R,{key:t.id,inputType:t.config.inputType,inputConfig:t.config.inputConfig,value:t.config.value,invalid:!t.config.valid,shouldValidate:t.config.validation,touched:t.config.touched,label:t.config.label,changed:function(n){return e.inputChangedHandler(n,t.id)}})})),r.a.createElement(V,{btnType:"Success",styling:"ml-2 mr-2 mt-2 btn btn-primary",disabled:!this.state.formIsValid},"Registrer"));return r.a.createElement(r.a.Fragment,null,t,r.a.createElement("h1",{className:"text-left ml-2 mr-2 mt-5"},"K\xf8registrering: "),o)}}]),n}(a.Component),X=Object(c.b)((function(e){return{subjects:e.queue.subjectData,loading:e.queue.loading,error:e.queue.error}}),(function(e){return{getQueueData:function(){return e(D())},addQueueEntity:function(t){return e(function(e){return function(t){t({type:"ADD_TO_QUEUE_START"}),k.post("queue/",e).then((function(){t({type:"ADD_TO_QUEUE_SUCCESS"}),t(D())})).catch((function(e){t(function(e){return{type:"ADD_TO_QUEUE_FAIL",error:e}}(e.response))}))}}(t))}}}))(z),W=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.autoSignIn(),this.props.getQueueData(),this.props.getSubjectData()}},{key:"render",value:function(){var e=r.a.createElement(g.d,null,r.a.createElement(g.b,{path:"/Orakel_Queue_Client/",exact:!0,render:function(){return r.a.createElement(X,null)}}),r.a.createElement(g.a,{to:"/Orakel_Queue_Client/"}));return r.a.createElement("div",{className:"App"},r.a.createElement(P,null,e))}}]),n}(a.Component),Y=Object(g.g)(Object(c.b)(null,(function(e){return{autoSignIn:function(){return e(O())},getQueueData:function(){return e(D())},getSubjectData:function(){return e((function(e){e({type:"FETCH_SUBJECTS_START"}),k.get("subjects/").then((function(t){e({type:"FETCH_SUBJECTS_SUCCESS",subjectData:t.data})})).catch((function(t){e(function(e){return{type:"FETCH_SUBJECTS_FAIL",error:e}}(t.response))}))}))}}}))(W)),$={token:null,userId:null,userRoles:null,error:null,loading:!1,showModal:!1},Z=function(e,t){return b(e,{error:null,loading:!0})},ee=function(e,t){return b(e,{token:t.token,userId:t.userId,userRoles:t.userRoles,error:null,loading:!1,showModal:!1})},te=function(e,t){return b(e,{error:t.error,loading:!1,showModal:!0})},ne=function(e,t){return b(e,{token:null,userId:null,userRoles:null})},ae=function(e,t){return b(e,{showModal:!t.visible})},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return Z(e);case"AUTH_SUCCESS":return ee(e,t);case"AUTH_FAIL":return te(e,t);case"AUTH_LOGOUT":return ne(e);case"TOGGLE_LOGIN_MODAL":return ae(e,t);default:return e}},oe={queueData:[],subjectData:[],error:null,loading:!1},le=function(e,t){return b(e,{error:null,loading:!0})},ie=function(e,t){return b(e,{error:t.error,loading:!1})},ue=function(e,t){return b(e,{queueData:t.queueData,error:null,loading:!1})},ce=function(e,t){return b(e,{error:null,loading:!1})},se=function(e,t){return b(e,{subjectData:t.subjectData,error:null,loading:!1})},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_QUEUE_START":case"ADD_TO_QUEUE_START":case"DELETE_FROM_QUEUE_START":case"DONE_IN_QUEUE_START":case"FETCH_SUBJECTS_START":return le(e);case"FETCH_QUEUE_FAIL":case"ADD_TO_QUEUE_FAIL":case"DELETE_FROM_QUEUE_FAIL":case"DONE_IN_QUEUE_FAIL":case"FETCH_SUBJECTS_FAIL":return ie(e,t);case"FETCH_QUEUE_SUCCESS":return ue(e,t);case"ADD_TO_QUEUE_SUCCESS":case"DELETE_FROM_QUEUE_SUCCESS":case"DONE_IN_QUEUE_SUCCESS":return ce(e);case"FETCH_SUBJECTS_SUCCESS":return se(e,t);default:return e}},me=(n(104),n(105),Object(u.c)({auth:re,queue:de})),pe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,fe=y(Object(u.e)(me,pe(Object(u.a)((function(e){return function(t){return function(n){console.log("[Middleware] Dispatching: ",n);var a=t(n);return console.log("[Middleware] next state: ",e.getState()),a}}}),s.a))),Object(u.e)(me,pe(Object(u.a)(s.a)))),ge=r.a.createElement(c.a,{store:fe},r.a.createElement(i.a,null,r.a.createElement(Y,null)));l.a.render(ge,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,n){e.exports=n(106)},81:function(e,t,n){}},[[72,1,2]]]);
//# sourceMappingURL=main.92c05820.chunk.js.map