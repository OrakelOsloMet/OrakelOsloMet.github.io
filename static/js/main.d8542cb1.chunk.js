(this.webpackJsonpreact_app=this.webpackJsonpreact_app||[]).push([[0],{21:function(e,t,n){e.exports={brandText:"navbar_brandText__3XSWe",brandImage:"navbar_brandImage__edego",defaultLinkText:"navbar_defaultLinkText__2jzNV",authenticatedBrandText:"navbar_authenticatedBrandText__3oLFp",authenticatedLinkText:"navbar_authenticatedLinkText__g8guY",invisibleOnMobile:"navbar_invisibleOnMobile__30ez-"}},58:function(e,t,n){e.exports={queueForm:"queue_queueForm__VAefN"}},61:function(e,t,n){e.exports=n(96)},91:function(e,t,n){e.exports=n.p+"static/media/oslometsvart.3b9b0cc3.png"},92:function(e,t,n){e.exports=n.p+"static/media/oslomethvit.2c306d99.png"},94:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(15),i=n.n(u);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,c,l=n(35),s=n(8),E=n(18),d=n(51);!function(e){e.AUTH_START="AUTH_START",e.AUTH_SUCCESS="AUTH_SUCCESS",e.AUTH_FAIL="AUTH_FAIL",e.AUTH_LOGOUT="AUTH_LOGOUT",e.CLEAR_ERROR="CLEAR_ERROR"}(o||(o={})),function(e){e.FETCH_QUEUE_START="FETCH_QUEUE_START",e.FETCH_QUEUE_SUCCESS="FETCH_QUEUE_SUCCESS",e.FETCH_QUEUE_FAIL="FETCH_QUEUE_FAIL",e.ADD_TO_QUEUE_START="ADD_TO_QUEUE_START",e.ADD_TO_QUEUE_SUCCESS="ADD_TO_QUEUE_SUCCESS",e.ADD_TO_QUEUE_FAIL="ADD_TO_QUEUE_FAIL",e.DELETE_FROM_QUEUE_START="DELETE_FROM_QUEUE_START",e.DELETE_FROM_QUEUE_SUCCESS="DELETE_FROM_QUEUE_SUCCESS",e.DELETE_FROM_QUEUE_FAIL="DELETE_FROM_QUEUE_FAIL",e.DONE_IN_QUEUE_START="DONE_IN_QUEUE_START",e.DONE_IN_QUEUE_SUCCESS="DONE_IN_QUEUE_SUCCESS",e.DONE_IN_QUEUE_FAIL="DONE_IN_QUEUE_FAIL",e.FETCH_SUBJECTS_START="FETCH_SUBJECTS_START",e.FETCH_SUBJECTS_SUCCESS="FETCH_SUBJECTS_SUCCESS",e.FETCH_SUBJECTS_FAIL="FETCH_SUBJECTS_FAIL"}(c||(c={}));var _,m=n(11),f=n(23),p=function(e,t){return Object(f.a)(Object(f.a)({},e),t)},g={user:null,error:null,loading:!1},T=function(e,t){return p(e,{error:null,loading:!0})},S=function(e,t){return p(e,{user:t.user,error:null,loading:!1})},U=function(e,t){return p(e,{error:t.error,loading:!1})},b=function(e,t){return p(e,{user:null})},C=function(e,t){return p(e,{error:null})},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.AUTH_START:return T(e);case o.AUTH_SUCCESS:return S(e,t);case o.AUTH_FAIL:return U(e,t);case o.AUTH_LOGOUT:return b(e);case o.CLEAR_ERROR:return C(e);default:return e}},h={queueData:[],subjectData:[],error:null,loading:!1},O=function(e,t){return p(e,{error:null,loading:!0})},A=function(e,t){return p(e,{error:t.error,loading:!1})},y=function(e,t){return p(e,{queueData:t.queueData,error:null,loading:!1})},k=function(e,t){return p(e,{error:null,loading:!1})},L=function(e,t){return p(e,{subjectData:t.subjectData,error:null,loading:!1})},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.FETCH_QUEUE_START:case c.ADD_TO_QUEUE_START:case c.DELETE_FROM_QUEUE_START:case c.DONE_IN_QUEUE_START:case c.FETCH_SUBJECTS_START:return O(e);case c.FETCH_QUEUE_FAIL:case c.ADD_TO_QUEUE_FAIL:case c.DELETE_FROM_QUEUE_FAIL:case c.DONE_IN_QUEUE_FAIL:case c.FETCH_SUBJECTS_FAIL:return A(e,t);case c.FETCH_QUEUE_SUCCESS:return y(e,t);case c.ADD_TO_QUEUE_SUCCESS:case c.DELETE_FROM_QUEUE_SUCCESS:case c.DONE_IN_QUEUE_SUCCESS:return k(e);case c.FETCH_SUBJECTS_SUCCESS:return L(e,t);default:return e}},F=Object(s.c)({auth:v,queue:D}),R=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,j=n(3),N=n(52),I=n.n(N),Q=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e}("http://localhost:8080/api/","https://orakelqueueservice.herokuapp.com/api/"),H=Q+"resources/userguide";!function(e){e.SELECT="select",e.INPUT="input"}(_||(_={}));var x=I.a.create({baseURL:Q}),w=function(e){return{type:o.AUTH_SUCCESS,user:e}},q=function(){return localStorage.removeItem("user"),{type:o.AUTH_LOGOUT}},B=function(){return function(e){var t=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null;t&&t.token?x.post("auth/isTokenValid",t.token).then((function(n){!0===n.data?e(w(t)):e(q())})):e(q())}},M=function(e,t){return function(n){return n({type:o.AUTH_START}),x.post("auth/signin",{username:e,password:t}).then((function(e){if(e.data.token)return localStorage.setItem("user",JSON.stringify(e.data)),n(w(e.data)),!0})).catch((function(e){return n(function(e){return{type:o.AUTH_FAIL,error:e}}(e.response.data.message)),!1}))}},V=function(){return{type:o.CLEAR_ERROR}},J=function(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}},P=function(){return function(e){e({type:c.FETCH_QUEUE_START}),x.get("queue/").then((function(t){var n;e((n=t.data,{type:c.FETCH_QUEUE_SUCCESS,queueData:n}))})).catch((function(t){e(function(e){return{type:c.FETCH_QUEUE_FAIL,error:e}}(t.response))}))}},G=function(e){return function(t){t({type:c.ADD_TO_QUEUE_START}),x.post("queue/",e).then((function(){t({type:c.ADD_TO_QUEUE_SUCCESS}),t(P())})).catch((function(e){t(function(e){return{type:c.ADD_TO_QUEUE_FAIL,error:e}}(e.response))}))}},z=function(e){return function(t){t({type:c.DELETE_FROM_QUEUE_START}),x.delete("queue/"+e,{headers:J()}).then((function(){t({type:c.DELETE_FROM_QUEUE_SUCCESS}),t(P())})).catch((function(e){t(function(e){return{type:c.DELETE_FROM_QUEUE_FAIL,error:e}}(e.response))}))}},X=function(e){return function(t){t({type:c.DONE_IN_QUEUE_START}),x.post("queue/confirmdone/"+e,null,{headers:J()}).then((function(){t({type:c.DONE_IN_QUEUE_SUCCESS}),t(P())})).catch((function(e){t(function(e){return{type:c.DONE_IN_QUEUE_FAIL,error:e}}(e.response))}))}},W=function(){return function(e){e({type:c.FETCH_SUBJECTS_START}),x.get("subjects/").then((function(t){var n;e((n=t.data,{type:c.FETCH_SUBJECTS_SUCCESS,subjectData:n}))})).catch((function(t){e(function(e){return{type:c.FETCH_SUBJECTS_FAIL,error:e}}(t.response))}))}},Y=n(99),K=n(24),$=n(21),Z=n.n($),ee=n(29),te=n.n(ee),ne=n(30),ae=n.n(ne),re=function(e){var t=e.title,n=e.contentText,a=e.url,r=e.hyperlinkText,u=ae()(te.a),i=document.createElement("div");return a&&r&&(i.innerHTML='<strong><a href="'.concat(a,'" target="_blank">').concat(r,"</a></strong>")),u.fire({title:t,html:n,footer:a&&r?i:null,icon:"info",confirmButtonText:"Lukk"})},ue=n(5),ie=n.n(ue),oe=n(14),ce=function(e){var t=e.onLoginSubmit,n=e.clearLoginError,a=ae()(te.a);return a.fire({title:"Orakel Innlogging",html:'<input type="text" id="login" class="swal2-input" placeholder="Brukernavn">\n                        <input type="password" id="password" class="swal2-input" placeholder="Passord">',confirmButtonText:"Logg Inn",showLoaderOnConfirm:!0,showCancelButton:!0,cancelButtonColor:"#d33",cancelButtonText:"Avbryt",allowOutsideClick:function(){return!a.isLoading()},preConfirm:function(){var e=Object(oe.a)(ie.a.mark((function e(){var n,r,u,i;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.getPopup().querySelector("#login"),r=a.getPopup().querySelector("#password"),u=n.value.trim(),i=r.value.trim(),u&&i){e.next=7;break}return a.showValidationMessage("Oppgi brukernavn og passord!"),e.abrupt("return",!1);case 7:return e.next=9,t(u,i);case 9:if(e.sent){e.next=13;break}return a.showValidationMessage("Ugyldig brukernavn eller passord!"),e.abrupt("return",!1);case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}).then((function(e){e.isDismissed&&n()}))},le=function(e){var t=e.isAuthenticated?Z.a.authenticatedLinkText:Z.a.defaultLinkText,a=e.isAuthenticated?{expand:"lg",bg:"warning"}:{variant:"dark",expand:"lg",bg:"primary"},u=r.a.createElement(K.a.Link,{className:t,onClick:e.isAuthenticated?e.logoutHandler:function(){ce({onLoginSubmit:e.onLoginSubmit,clearLoginError:e.clearLoginError})}},e.isAuthenticated?"Logg Ut":"Admin");return r.a.createElement(Y.a,a,r.a.createElement(Y.a.Brand,{className:Z.a.invisibleOnMobile},r.a.createElement("img",{className:Z.a.brandImage,alt:"OsloMet Logo",src:n(e.isAuthenticated?91:92)})),r.a.createElement(Y.a.Brand,{className:e.isAuthenticated?Z.a.authenticatedBrandText:Z.a.brandText},"Orakel"),r.a.createElement(Y.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(Y.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(K.a,null,r.a.createElement(K.a.Link,{className:t,onClick:function(){return re({title:"Discord",contentText:"For digital veiledning benytter vi oss av Discord, og har v\xe5r egen server til dette. Inne p\xe5 serveren setter vi pris p\xe5 om du leser informasjonen i tekstkanalen kalt informasjon, og vi anbefaler alle \xe5 laste ned klienten deres i stedet for \xe5 bruke tjenesten gjennom nettleseren.",url:"https://discord.gg/jgzqYpX",hyperlinkText:"Orakel Discord"})}},"Discord"),r.a.createElement(K.a.Link,{className:t,onClick:function(){return re({title:"Feilrapportering",contentText:"Orakels k\xf8system er et fritidsprosjekt som er bygget og vedlikeholdt av en person. Det er derfor en viss fare for bugs og feil. Disse kan rapporteres ved \xe5 legge inn en issue p\xe5 GitHub-repoet, eller ved \xe5 ta kontakt med Fredrik Pedersen. Vi setter ogs\xe5 pris p\xe5 \xf8nsker om tilleggsfunksjonalitet :)",url:"https://github.com/OrakelOsloMet/Orakel_Queue_Client/issues",hyperlinkText:"GitHub Repo"})}},"Feilrapportering"),r.a.createElement(K.a.Link,{className:t,onClick:function(){return re({title:"Om Orakels K\xf8system",contentText:"Coming Soon!",url:H,hyperlinkText:"Brukerveiledning"})}},"Om"),u)))},se=Object(E.b)((function(e){var t;return{isAuthenticated:void 0!==(null===(t=e.auth.user)||void 0===t?void 0:t.token)}}),(function(e){return Object(s.b)({onLoginSubmit:M,clearLoginError:V,logoutHandler:q},e)}))(le),Ee=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(se,null),r.a.createElement("main",{className:"mb-5"},e.children))},de=n(59),_e=n(58),me=n.n(_e),fe=n(98),pe=function(e){var t=[];return e.defaultColumns.forEach((function(e){t.push(r.a.createElement("th",{key:"".concat(e," Header"),scope:"col"},e))})),e.isAuthenticated&&e.loggedInColumns.forEach((function(e){t.push(r.a.createElement("th",{key:"".concat(e," Header"),scope:"col"},e))})),r.a.createElement("thead",{key:"tableHead",className:"thead-dark"},r.a.createElement("tr",null,t))},ge=function(e){return r.a.createElement("button",{type:"submit",disabled:e.disabled,className:"btn btn-primary ".concat(e.className),onClick:e.onClick},e.children)},Te=function(e){return r.a.createElement("button",{disabled:e.disabled,className:"btn btn-success ".concat(e.className),onClick:e.onClick},e.children)},Se=function(e){return r.a.createElement("button",{disabled:e.disabled,className:"btn btn-danger ".concat(e.className),onClick:e.onClick},e.children)},Ue=function(e){for(var t=e.queueData,n=e.confirmDoneEntity,a=e.deleteQueueEntity,u=e.isAuthenticated,i=e.userRoles,o=e.defaultColumns,c=e.loggedInColumns,l=[],s=function(e){var o="row"+e,c=[];c.push(r.a.createElement("td",{key:"entry"+e,id:"entry"+e},"# ",e+1)),c.push(r.a.createElement("td",{key:"name"+e,id:"name"+e},t[e].name)),c.push(r.a.createElement("td",{key:"subject"+e,id:"subject"+e},t[e].subject)),c.push(r.a.createElement("td",{key:"discord"+e,id:"discord"+e},t[e].digitalConsultation?"Discord":"Datatorget")),u&&i.includes("ROLE_ADMIN")&&c.push(r.a.createElement("td",{key:"actions"+e,id:"action"+e},r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,{onClick:function(){return n(t[e].id)}},"Ferdig"),r.a.createElement(Se,{className:"ml-2",onClick:function(){return a(t[e].id)}},"Slett")))),l.push(r.a.createElement("tr",{key:e,id:o},c))},E=0;E<t.length;E++)s(E);var d=r.a.createElement(pe,{defaultColumns:o,loggedInColumns:c,isAuthenticated:u}),_=r.a.createElement("tbody",null,l);return r.a.createElement(fe.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"mb-4"},d,_)},be=Object(a.forwardRef)((function(e,t){var n,a,u=e.formElement,i=e.error,o="form-control ml-2 mr-2 mt-2 ";switch(u.inputType){case _.INPUT:a=u,i&&(o+="is-invalid"),n=r.a.createElement("input",Object.assign({name:a.name,ref:t,className:o},a.inputConfig));break;case _.SELECT:a=u,n=r.a.createElement("select",{name:u.name,ref:t,className:o},a.inputConfig.options.map((function(e){return r.a.createElement("option",{key:String(e.value),value:String(e.value)},e.displayValue)})));break;default:n=r.a.createElement("input",{className:"form-control"})}return r.a.createElement(r.a.Fragment,null,n)})),Ce=function(){return r.a.createElement("div",{className:"spinner-border text-primary"})},ve=function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e})),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){"undefined"!==typeof(null===n||void 0===n?void 0:n.current)&&(null===n||void 0===n||n.current())}),t);return function(){return clearInterval(e)}}}),[t])},he=function(e){var t=Object(de.a)(),n=t.register,u=t.handleSubmit,i=t.reset,o=t.errors,c=t.formState.isSubmitSuccessful;ve((function(){e.pollingFunction()}),5e3);var l=Object(a.useState)({name:"firstname",inputType:_.INPUT,inputConfig:{type:"text",placeholder:"Fornavn"},validation:{minLength:3,errorMessage:"Vennligst oppgi et fornavn p\xe5 minst 3 bokstaver"}}),s=Object(m.a)(l,2),E=s[0],d=(s[1],Object(a.useState)({name:"subject",inputType:_.SELECT,inputConfig:{options:[{value:"Loading",displayValue:"Loading"}]}})),p=Object(m.a)(d,2),g=p[0],T=p[1],S=Object(a.useState)({name:"year",inputType:_.SELECT,inputConfig:{options:[{value:1,displayValue:"1. \xe5r"},{value:2,displayValue:"2. \xe5r"},{value:3,displayValue:"3. \xe5r"}]}}),U=Object(m.a)(S,2),b=U[0],C=(U[1],Object(a.useState)({name:"digitalConsultation",inputType:_.SELECT,inputConfig:{options:[{value:!1,displayValue:"Fysisk Veiledning (Datatorget)"},{value:!0,displayValue:"Digital Veiledning (Discord)"}]}})),v=Object(m.a)(C,2),h=v[0];v[1];Object(a.useEffect)((function(){e.pollingFunction(),e.subjects.length>0&&O()}),[e.subjects]),Object(a.useEffect)((function(){c&&i()}),[c,i]);var O=function(){var t,n=Object(f.a)({},g);n.inputConfig.options=[],null===(t=e.subjects)||void 0===t||t.forEach((function(e){n.inputConfig.options.push({value:e,displayValue:e})})),T(n)},A=void 0===e.queueData?r.a.createElement(Ce,null):r.a.createElement(Ue,{defaultColumns:["Plassering","Navn","Emne","Arena"],loggedInColumns:["Handlinger"],queueData:e.queueData,isAuthenticated:e.isAuthenticated,userRoles:e.userRoles,confirmDoneEntity:e.confirmDoneEntity,deleteQueueEntity:e.deleteQueueEntity}),y={nameInput:E,subjectSelect:g,yearSelect:b,digitalConsultationSelect:h},k=r.a.createElement("form",{onSubmit:u((function(t){var n=function(e){for(var t=Object(f.a)({},e),n=0,a=Object.entries(t);n<a.length;n++){var r=Object(m.a)(a[n],2),u=r[0],i=r[1];"string"==typeof i&&("true"!==i&&"false"!==i||(t[u]="true"==i),isNaN(i)||(t[u]=parseFloat(i)))}return t}(t),a={name:n.firstname,subject:n.subject,digitalConsultation:n.digitalConsultation,studyYear:n.year};e.addQueueEntity(a)})),className:"form-inline mt-5 mb-5 "+me.a.queueForm,style:{margin:"auto",width:"50%"}},Object.values(y).map((function(e){var t=n;if(e.inputType===_.INPUT){var a=e;t=n({required:a.validation.errorMessage,minLength:{value:a.validation.minLength,message:a.validation.errorMessage}})}return r.a.createElement(be,{key:e.name,formElement:e,ref:t,error:o.firstname})})),r.a.createElement(ge,{className:"ml-2 mr-2 mt-2"},"Registrer"));return r.a.createElement(r.a.Fragment,null,k,A)},Oe=Object(E.b)((function(e){var t;return{isAuthenticated:null!=(null===(t=e.auth.user)||void 0===t?void 0:t.token),userRoles:e.auth.user?e.auth.user.roles:[],queueData:e.queue.queueData,subjects:e.queue.subjectData,loading:e.queue.loading,error:e.queue.error}}),(function(e){return Object(s.b)({addQueueEntity:G,deleteQueueEntity:z,confirmDoneEntity:X,pollingFunction:P},e)}))(he),Ae=Object(j.g)(Object(E.b)(null,(function(e){return Object(s.b)({autoLogin:B,getSubjectData:W},e)}))((function(e){var t=e.autoLogin,n=e.getSubjectData;Object(a.useEffect)((function(){t(),n()}),[]);var u=r.a.createElement(j.d,null,r.a.createElement(j.b,{path:"/Orakel_Queue_Client/",exact:!0,render:function(){return r.a.createElement(Oe,null)}}),r.a.createElement(j.a,{to:"/Orakel_Queue_Client/"}));return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(Ee,null,u))}))),ye=(n(94),n(95),Object(s.e)(F,R(Object(s.a)(d.a)))),ke=r.a.createElement(E.a,{store:ye},r.a.createElement(l.a,null,r.a.createElement(Ae,null)));i.a.render(ke,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[61,1,2]]]);
//# sourceMappingURL=main.d8542cb1.chunk.js.map